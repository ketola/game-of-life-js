<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Raphael</title>
<script type="text/javascript" src="js/raphael.js" charset="UTF-8"></script>
<script type="text/javascript" src="js/jquery.js" charset="UTF-8"></script>
<script type="text/javascript" src="js/game-of-life.js" charset="UTF-8"></script>

<script type="text/javascript">

var gameOfLife;
var paper;

$(document).ready(function() {
	 gameOfLife = new GameOfLife(20, 20);

	 //gameOfLife.grid[1][2].alive = true;
	 //gameOfLife.grid[2][2].alive = true;
	 //gameOfLife.grid[3][2].alive = true;
	 
	 gameOfLife.grid[2][1].alive = true;
	 gameOfLife.grid[3][2].alive = true;
	 gameOfLife.grid[1][3].alive = true;
	 gameOfLife.grid[2][3].alive = true;
	 gameOfLife.grid[3][3].alive = true;
		
	draw();
});



function drawRect(x, y){
	
	x = Math.floor( x / 10 ) * 10;
	y = Math.floor( y / 10 ) * 10;
	
	var rect = paper.rect(x, y, 10, 10, 2);
	rect.attr("stroke", "#84CB5E");
	rect.attr("fill", "#446135");
}


function log(object){
	var output = '';
	for (property in object) {
	  output += property + ': ' + object[property]+'; ';
	}
	alert(output);
}

function draw(){
	paper = Raphael($("#drawArea"), 320, 220);
	var rect = paper.rect(0, 0, 200, 200, 2);
	rect.attr("fill", "#84CB5E");
	rect.attr("stroke", "#84CB5E");
	rect.click(function(event){
		drawRect(event.layerX, event.layerY);
	});
	
	for(var i = 0; i < 20; i++){	
		for(var j = 0; j < 20; j++){
			if(gameOfLife.grid[i][j].alive == true){
				drawRect(i*10, j*10);
			}
		}	
	}

	drawNextGeneration();
}

function drawNextGeneration()
{	
	gameOfLife.nextGeneration();
	var t=setTimeout("draw()",500);
}

</script>
</head>
<body>
<div id="drawArea"></div>
</body>

</html>
